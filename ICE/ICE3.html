
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>ICE 3: Top Level Design &#8212; ECE 281</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lab 0: Install Vivado" href="../lab/lab0.html" />
    <link rel="prev" title="ICE 2: Half-Adder" href="ICE2.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">ECE 281</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome to your Jupyter Book
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Course Info
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../faq.html">
   FAQ
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  In Class Exercise
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="ICE0.html">
   BCE 0: Get started with Git
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ICE1.html">
   ICE 1: OR Gates
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ICE2.html">
   ICE 2: Half-Adder
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   ICE 3: Top Level Design
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Labs
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../lab/lab0.html">
   Lab 0: Install Vivado
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab/lab2Prelab.html">
   Lab 2 Prelab - Seven Segment Display Decoder
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lab/lab2.html">
   Lab 2 - Seven Segment Display Decoder
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Appendix
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../appendix/vivado-project.html">
   Manually Setup a Vivado Project
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/usafa-ece/ece281-book"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/usafa-ece/ece281-book/issues/new?title=Issue%20on%20page%20%2FICE/ICE3.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/ICE/ICE3.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   OVERVIEW
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#objectives">
   OBJECTIVES
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#desired-end-state">
   DESIRED END STATE
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#full-adder-and-design-flow">
   FULL-ADDER AND DESIGN FLOW
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-vivado-project">
   1. CREATE A VIVADO PROJECT
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-code-and-images-directories-and-add-files-to-them">
   2. CREATE CODE AND IMAGES DIRECTORIES AND ADD FILES TO THEM
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#import-provided-files">
     Import provided files
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#add-stage-and-commit-your-changes">
     Add/stage and commit your changes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-design">
   3. CREATE DESIGN
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#add-sources-design-simulation-and-constraints">
     ADD SOURCES (DESIGN, SIMULATION, AND CONSTRAINTS)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#edit-your-top-basys3">
     EDIT YOUR TOP_BASYS3
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#file-header">
       FILE HEADER
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#inspect-the-top-basys3-entity">
       INSPECT THE TOP_BASYS3 ENTITY
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#modify-the-half-adder-architecture">
       MODIFY THE HALF-ADDER ARCHITECTURE
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#test-design">
   4. TEST DESIGN
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#edit-your-testbench">
     EDIT YOUR TESTBENCH
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#check-syntax-and-simulate-your-project">
     CHECK SYNTAX AND SIMULATE YOUR PROJECT
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#implement-design">
   5. IMPLEMENT DESIGN
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#edit-the-constraints-file">
     EDIT THE CONSTRAINTS FILE
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#implement-and-generate-bitstream">
     IMPLEMENT AND GENERATE BITSTREAM
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#download-onto-fpga-and-test-functionality">
   6. DOWNLOAD ONTO FPGA AND TEST FUNCTIONALITY
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#wrapping-up">
   7. WRAPPING UP…
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>ICE 3: Top Level Design</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   OVERVIEW
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#objectives">
   OBJECTIVES
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#desired-end-state">
   DESIRED END STATE
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#full-adder-and-design-flow">
   FULL-ADDER AND DESIGN FLOW
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-a-vivado-project">
   1. CREATE A VIVADO PROJECT
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-code-and-images-directories-and-add-files-to-them">
   2. CREATE CODE AND IMAGES DIRECTORIES AND ADD FILES TO THEM
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#import-provided-files">
     Import provided files
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#add-stage-and-commit-your-changes">
     Add/stage and commit your changes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-design">
   3. CREATE DESIGN
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#add-sources-design-simulation-and-constraints">
     ADD SOURCES (DESIGN, SIMULATION, AND CONSTRAINTS)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#edit-your-top-basys3">
     EDIT YOUR TOP_BASYS3
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#file-header">
       FILE HEADER
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#inspect-the-top-basys3-entity">
       INSPECT THE TOP_BASYS3 ENTITY
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#modify-the-half-adder-architecture">
       MODIFY THE HALF-ADDER ARCHITECTURE
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#test-design">
   4. TEST DESIGN
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#edit-your-testbench">
     EDIT YOUR TESTBENCH
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#check-syntax-and-simulate-your-project">
     CHECK SYNTAX AND SIMULATE YOUR PROJECT
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#implement-design">
   5. IMPLEMENT DESIGN
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#edit-the-constraints-file">
     EDIT THE CONSTRAINTS FILE
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#implement-and-generate-bitstream">
     IMPLEMENT AND GENERATE BITSTREAM
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#download-onto-fpga-and-test-functionality">
   6. DOWNLOAD ONTO FPGA AND TEST FUNCTIONALITY
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#wrapping-up">
   7. WRAPPING UP…
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="ice-3-top-level-design">
<h1>ICE 3: Top Level Design<a class="headerlink" href="#ice-3-top-level-design" title="Permalink to this headline">#</a></h1>
<section id="overview">
<h2>OVERVIEW<a class="headerlink" href="#overview" title="Permalink to this headline">#</a></h2>
<p>So far in this course you have implemented individual components on your
FPGA. However, one of the benefits of VHDL is that we can pull multiple
components into a single design. To do this, we are introducing the
concept of a top_level design. The top level is where you pull in and
connect all of the different components you will be using before finally
connecting them to the IO of the board. You will need to use the concept
of a top_level design in Lab 2 so this is directly applicable.</p>
</section>
<section id="objectives">
<h2>OBJECTIVES<a class="headerlink" href="#objectives" title="Permalink to this headline">#</a></h2>
<p>The objectives of this in-class exercise are for you to:</p>
<ul class="simple">
<li><p>Implement and test a full adder with half-adders using VDHL</p></li>
<li><p>Gain more experience using tools (Git, Markdown, Xilinx Vivado)</p></li>
</ul>
</section>
<section id="desired-end-state">
<h2>DESIRED END STATE<a class="headerlink" href="#desired-end-state" title="Permalink to this headline">#</a></h2>
<p>You will be able to provide a live demo to your instructor. You are not
required to turn in ICE3 however, you will need to demonstrate
functionality and ensure the following files are pushed to your
repository:</p>
<ol class="simple">
<li><p>VHDL files used (top_basys3, half-adder and testbench) in a <code class="docutils literal notranslate"><span class="pre">code</span></code>
folder</p></li>
<li><p>Constraints (<code class="docutils literal notranslate"><span class="pre">.xdc</span></code>) file in a <code class="docutils literal notranslate"><span class="pre">code</span></code> folder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.bit</span></code> file used to program board</p></li>
</ol>
</section>
<section id="full-adder-and-design-flow">
<h2>FULL-ADDER AND DESIGN FLOW<a class="headerlink" href="#full-adder-and-design-flow" title="Permalink to this headline">#</a></h2>
<p>A half-adder takes two single-bit inputs and outputs their sum. A truth
table, schematic symbol, and logic equations for a half-adder are shown
in Figure 1. We will follow the digital design shown in Figure 3.</p>
<p><img alt="Full-adder schematic" src="../_images/ice3_image1.jpg" /></p>
<p><em>Figure 1 – Full-adder schematic symbol</em></p>
<div class="math notranslate nohighlight">
\[
S = A \oplus B \oplus C_{in}
\]</div>
<div class="math notranslate nohighlight">
\[
C_{out} = AB + AC_{in} + BC_{in}
\]</div>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p><span class="math notranslate nohighlight">\(C_{in}\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(A\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(B\)</span></p></th>
<th class="head"><p></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(C_{out}\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(S\)</span></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p></p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p>0</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p></p></td>
<td><p>0</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p>1</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p></p></td>
<td><p>0</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p>1</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p></p></td>
<td><p>1</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p></p></td>
<td><p>1</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
</section>
<section id="create-a-vivado-project">
<h2>1. CREATE A VIVADO PROJECT<a class="headerlink" href="#create-a-vivado-project" title="Permalink to this headline">#</a></h2>
<p>At this point you should NOT have an ICE3 directory in your git
repository. Instead, Vivado will create that directory for you when you
create a project. Create a new project titled ICE3. The process to do
this was covered in ICE2. Refer back to ICE2 instructions if you need
help</p>
</section>
<section id="create-code-and-images-directories-and-add-files-to-them">
<h2>2. CREATE CODE AND IMAGES DIRECTORIES AND ADD FILES TO THEM<a class="headerlink" href="#create-code-and-images-directories-and-add-files-to-them" title="Permalink to this headline">#</a></h2>
<section id="import-provided-files">
<h3>Import provided files<a class="headerlink" href="#import-provided-files" title="Permalink to this headline">#</a></h3>
<p>Navigate to your ICE3 folder in Windows Explorer (file manager), create
a code folder, and add these provided files to it:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">halfAdder.vhd</span></code> and <code class="docutils literal notranslate"><span class="pre">halfAdder_tb.vhd</span></code> (these are the solutions. You can
use yours if desired)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_basys3</span></code> and <code class="docutils literal notranslate"><span class="pre">top_basys3_tb</span></code></p></li>
<li><p>Constraints file (<code class="docutils literal notranslate"><span class="pre">Basys3_Master.xdc</span></code>)</p></li>
</ul>
</section>
<section id="add-stage-and-commit-your-changes">
<h3>Add/stage and commit your changes<a class="headerlink" href="#add-stage-and-commit-your-changes" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>Use <a class="reference external" href="https://www.atlassian.com/git/tutorials/saving-changes">git add</a> to stage the relevant changes</p></li>
<li><p>Use <a class="reference external" href="https://www.atlassian.com/git/tutorials/saving-changes/git-commit">git commit</a> to commit the changes. Prepend all commit statements for ICE3 with <code class="docutils literal notranslate"><span class="pre">ICE3</span> <span class="pre">--</span> </code>. For instance, your first commit might be:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ICE3 -- import provided project files
</pre></div>
</div>
</section>
</section>
<section id="create-design">
<h2>3. CREATE DESIGN<a class="headerlink" href="#create-design" title="Permalink to this headline">#</a></h2>
<section id="add-sources-design-simulation-and-constraints">
<h3>ADD SOURCES (DESIGN, SIMULATION, AND CONSTRAINTS)<a class="headerlink" href="#add-sources-design-simulation-and-constraints" title="Permalink to this headline">#</a></h3>
<p>Add all of the provided files to your project. Instructions were given
in ICE2 to do this. The _tb files will be simulation sources, the .xdc
file will be a constraint, and the remaining two files will be design
sources.</p>
</section>
<section id="edit-your-top-basys3">
<h3>EDIT YOUR TOP_BASYS3<a class="headerlink" href="#edit-your-top-basys3" title="Permalink to this headline">#</a></h3>
<p>Open up your <code class="docutils literal notranslate"><span class="pre">top_basys3.vhd</span></code> file in a text editor.</p>
<section id="file-header">
<h4>FILE HEADER<a class="headerlink" href="#file-header" title="Permalink to this headline">#</a></h4>
<p>Modify the file header to reflect your work. Do not leave the
documentation statement blank. You may refer all documentation
statements to top_basys3 header. (ex: your top_basys3_tb file header
will say “See top_basys3.vhd” for documentation.</p>
</section>
<section id="inspect-the-top-basys3-entity">
<h4>INSPECT THE TOP_BASYS3 ENTITY<a class="headerlink" href="#inspect-the-top-basys3-entity" title="Permalink to this headline">#</a></h4>
<p>Unlike the half-adder, the full-adder has three inputs though it shares
the same two outputs. This has been given to you. Note that we went
ahead and used a logic vector of size three for the input switches, and
a logic vector of size two for the output LEDs. We could have given each
input and output its own name if desired.</p>
<p><img alt="Entity for top_basys3 implementing a full adder" src="ICE/img/ice3_image4.jpg" /></p>
<p><em>Figure 2– Entity for top_basys3 implementing a full-adder</em></p>
</section>
<section id="modify-the-half-adder-architecture">
<h4>MODIFY THE HALF-ADDER ARCHITECTURE<a class="headerlink" href="#modify-the-half-adder-architecture" title="Permalink to this headline">#</a></h4>
<p>You need to modify the architecture of your top_basys3 file to reflect
the full adder shown below in Figure 3.</p>
<p><img alt="Entity and architecture for implementing full adder with twohalf-adders" src="../_images/ice3_image5.jpg" /></p>
<p><em>Figure 3 – Entity and architecture for implementing full adder with two
half-adders</em></p>
<p>If you remember from the half adder</p>
<p><strong>Half-adder</strong></p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p><span class="math notranslate nohighlight">\(A\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(B\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(C_{out}\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(S\)</span></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<div class="math notranslate nohighlight">
\[
S = A \oplus B
\]</div>
<div class="math notranslate nohighlight">
\[
C_{out} = AB
\]</div>
<p>This means <code class="docutils literal notranslate"><span class="pre">w_S1</span> <span class="pre">=</span> <span class="pre">A</span> <span class="pre">xor</span> <span class="pre">B</span></code>. It follows that placing <code class="docutils literal notranslate"><span class="pre">w_S1</span></code> into the second
half adder as <code class="docutils literal notranslate"><span class="pre">i_A</span></code> and <code class="docutils literal notranslate"><span class="pre">Cin</span></code> as <code class="docutils literal notranslate"><span class="pre">i_B</span></code> would get us <code class="docutils literal notranslate"><span class="pre">o_S</span> <span class="pre">=</span> <span class="pre">A</span> <span class="pre">xor</span> <span class="pre">B</span> <span class="pre">xor</span> <span class="pre">Cin</span></code>
matching the equation in figure 1. Likewise the <code class="docutils literal notranslate"><span class="pre">o_Cout</span></code> of half adder 1
will be <code class="docutils literal notranslate"><span class="pre">w_Cout1</span> <span class="pre">=</span> <span class="pre">AB</span></code>.</p>
<p>So <code class="docutils literal notranslate"><span class="pre">w_Cout2</span></code> then becomes <code class="docutils literal notranslate"><span class="pre">w_Cout2</span> <span class="pre">=</span> <span class="pre">Cin(A</span> <span class="pre">xor</span> <span class="pre">B)</span></code>. Thus
<code class="docutils literal notranslate"><span class="pre">led(1)</span> <span class="pre">=</span> <span class="pre">AB</span> <span class="pre">+</span> <span class="pre">Cin(A</span> <span class="pre">xor</span> <span class="pre">B)</span></code> which simplifies down to <code class="docutils literal notranslate"><span class="pre">led(1)</span> <span class="pre">=</span> <span class="pre">AB</span> <span class="pre">+</span> <span class="pre">ACin</span> <span class="pre">+</span> <span class="pre">BCin</span></code>.</p>
<p>The first step is to add the half adder component and any signals you
will need to implement your design. These declarations go in between the
architecture and begin statements as shown in Figure 4 below. See the
test bench you developed for ICE2 if you are confused how to do this.
The syntax will be identical to the half adder entity, but will instead
start with “component” (see figure 4). Just like the test bench pulls in
your component to simulate inputs and outputs for it, a top level design
will bring in components and wire them together. If you aren’t sure what
signals you may need to create, the general rule is to create a signal
for any wire not connected directly to an input or an output. See Figure
3 above for some ideas on what to create.</p>
<p><img alt="Component and signal declarations" src="ICE/img/ice3_image6.jpg" /></p>
<p><em>Figure 4 – Component and signal declarations</em></p>
<p>You will then need to create two instantiations of the half adder wire
them up, and add the rest of the logic you need to fully implement the
design in Figure 3. Notice that we have TWO instantiations of halfAdder
and we have given them unique names (<code class="docutils literal notranslate"><span class="pre">halfadder1_inst</span></code> and
<code class="docutils literal notranslate"><span class="pre">halfAdder2_inst</span></code>).</p>
<p><img alt="Half adder instantiations" src="ICE/img/ice3_image7.jpg" /></p>
<p><em>Figure 5 – Half adder instantiations</em></p>
</section>
</section>
</section>
<section id="test-design">
<h2>4. TEST DESIGN<a class="headerlink" href="#test-design" title="Permalink to this headline">#</a></h2>
<p>At this point your testbench VHDL file (<code class="docutils literal notranslate"><span class="pre">top_basys3_tb.vhd</span></code>) should
already be added. If not, go back and add it.</p>
<section id="edit-your-testbench">
<h3>EDIT YOUR TESTBENCH<a class="headerlink" href="#edit-your-testbench" title="Permalink to this headline">#</a></h3>
<p>Open your testbench file in a text editor. Note the header has
top_basys3.vhd as a REQUIRED FILE. This exercise will not walk you
through the details of creating a test bench. If you are unsure, revisit
ICE2 for more detailed instructions.</p>
<p>You will need to declare your top_basys3 “component” in the test bench,
create signals to simulate the inputs and outputs, and connect them in a
port map. Again, revist ICE2 (or the included half_adder_tb) if you
struggle with this.</p>
<p>You will then need to create your test cases within the test process.
Figure 6 below includes an example for the first line. Note that we were
able to simulate all three bits of the input with a single command.
Create all additional test cases you will need. How many test cases will
you need?</p>
<p><img alt="Example test case" src="ICE/img/ice3_image8.jpg" /></p>
<p><em>Figure 6 – Example test case</em></p>
</section>
<section id="check-syntax-and-simulate-your-project">
<h3>CHECK SYNTAX AND SIMULATE YOUR PROJECT<a class="headerlink" href="#check-syntax-and-simulate-your-project" title="Permalink to this headline">#</a></h3>
</section>
</section>
<section id="implement-design">
<h2>5. IMPLEMENT DESIGN<a class="headerlink" href="#implement-design" title="Permalink to this headline">#</a></h2>
<section id="edit-the-constraints-file">
<h3>EDIT THE CONSTRAINTS FILE<a class="headerlink" href="#edit-the-constraints-file" title="Permalink to this headline">#</a></h3>
<ol class="simple">
<li><p>Click on the Project Manager in the Flow Navigator</p></li>
<li><p>Double click on the <code class="docutils literal notranslate"><span class="pre">Basys3_Master.xdc</span></code> file in the Sources sub-window
to open it.</p></li>
<li><p>Get your BASYS 3 board out and look at the text surrounding the
switches and LEDs. Note, the labels underneath the switches are the
physical pin locations on your BASYS 3 board. For example, <code class="docutils literal notranslate"><span class="pre">SW0</span></code> is
connected to pin <code class="docutils literal notranslate"><span class="pre">V17</span></code>. Find (use CTRL+f) <code class="docutils literal notranslate"><span class="pre">V17</span></code> in the constraints
file. You should see it first on line 12 as shown below.</p></li>
</ol>
<p><img alt="Constrain file pin V17" src="ICE/img/ice3_image9.jpg" /></p>
<ol class="simple">
<li><p>Unlike our pervious exercise, you will not need to replace the
highlighted portions. We made our entity inputs and outputs reflect
the default constraint file naming convention.</p></li>
<li><p>Uncomment all lines needed for this design (sw{0}, sw{1}, sw{2},
led{0}, and led{1}.</p></li>
</ol>
</section>
<section id="implement-and-generate-bitstream">
<h3>IMPLEMENT AND GENERATE BITSTREAM<a class="headerlink" href="#implement-and-generate-bitstream" title="Permalink to this headline">#</a></h3>
</section>
</section>
<section id="download-onto-fpga-and-test-functionality">
<h2>6. DOWNLOAD ONTO FPGA AND TEST FUNCTIONALITY<a class="headerlink" href="#download-onto-fpga-and-test-functionality" title="Permalink to this headline">#</a></h2>
<p>IF you are unsure how to proceed, revisit ICE2</p>
</section>
<section id="wrapping-up">
<h2>7. WRAPPING UP…<a class="headerlink" href="#wrapping-up" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Double check that you have everything <strong>committed</strong> to your git repo.</p></li>
<li><p>Then <a class="reference external" href="https://www.atlassian.com/git/tutorials/syncing/git-push">push</a> them to your repo.</p></li>
<li><p>Make sure all your work appears in Bitbucket as you expect.</p></li>
<li><p>Show your simulation waveform to an instructor</p></li>
<li><p>Demo your working board to an instructor</p></li>
</ul>
<p><strong>Congratulations, you have completed In Class Exercise 3!</strong></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./ICE"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="ICE2.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">ICE 2: Half-Adder</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../lab/lab0.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lab 0: Install Vivado</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By DFEC<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>